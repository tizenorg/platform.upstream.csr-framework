# Make test binary
PKG_CHECK_MODULES(${TARGET_CSR_TEST}_DEP
    REQUIRED
)

# TODO: Integrate TCS test and TWP test into one binary
SET(${TARGET_CSR_TEST}_SRCS
    SampleInfo.c
    TCSTest.c
    TCSTestUtils.c
    TWPTest.c
    TWPTestUtils.c
    XMHttp.c
    XMPHttp.c
)

INCLUDE_DIRECTORIES(
    ${PROJECT_SOURCE_DIR}/include/csr
    ${${TARGET_CSR_TEST}_DEP_INCLUDE_DIRS}
)

ADD_EXECUTABLE(${TARGET_CSR_TEST} ${${TARGET_CSR_TEST}_SRCS})

TARGET_LINK_LIBRARIES(${TARGET_CSR_TEST}
    ${TARGET_CSR_CLIENT}
    ${${TARGET_CSR_TEST}_DEP_LIBRARIES}
)

INSTALL (TARGETS ${TARGET_CSR_TEST} DESTINATION ${BIN_DIR})
